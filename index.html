<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sticker Preference Survey</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #fff5f9; color: #333; }
    h1 { color: black; text-align: center;}
    h2 { color: #e91e63; text-align: center;}
    label { display: block; margin-top: 15px; }
    input, select, textarea { width: 100%; padding: 10px; margin-top: 5px; border-radius: 6px; border: 1px solid #ccc; }
    button { margin-top: 20px; padding: 10px 15px; background-color: #e91e63; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background-color: #d81b60; }
  </style>
</head>
<body>
  <h1>Kuro To Shiro</h1>
  <h2>âœ¨ Sticker Survey âœ¨</h2>

  <form id="stickerForm">
    <label>1. What kind of sticker vibes do you like?</label>
    <select name="style" required>
      <option value="" disabled selected>Your Vibe</option>
      <option>Cute</option>
      <option>Cool</option>
      <option>Funny</option>
      <option>Comfy</option>
      <option>Random/Quirky</option>
    </select>

    <label>2. Which sticker characters or themes do you like? (comma separated)</label>
    <input type="text" name="themes" placeholder="Hello Kitty, Anime, Food, etc..." required>

    <label>3. How much would you pay for 1 sticker?</label>
    <select name="price" required>
      <option value="" disabled selected>Your Budget?</option>
      <option>â‚¹5</option>
      <option>â‚¹10</option>
      <option>â‚¹15</option>
      <option>â‚¹20</option>
    </select>

    <label>4. How many stickers for â‚¹30?</label>
    <input type="number" name="bundle30" min="1" required>

    <label>5. How many stickers for â‚¹50?</label>
    <input type="number" name="bundle50" min="1" required>

    <label>6. How many stickers for â‚¹100?</label>
    <input type="number" name="bundle100" min="1" required>

    <label>7. Do you prefer single stickers or bundles?</label>
    <select name="bundlePreference" required>
      <option value="" disabled selected>Bundles?</option>
      <option>Single</option>
      <option>Bundle</option>
      <option>Depends</option>
    </select>

    <label>8. Would you like custom sticker packs?</label>
    <select name="custom" required>
      <option value="" disabled selected>Custom Packs?</option>
      <option>Yes</option>
      <option>Maybe</option>
      <option>No</option>
    </select>

    <label>9. What sticker size do you like?</label>
    <select name="size" required>
      <option value="" disabled selected>What's Size</option>
      <option>Small (2cm - 4cm)</option>
      <option>Medium (5cm - 7cm)</option>
    </select>

    <label>10. Where would you use the stickers?</label>
    <input type="text" name="usage" placeholder="Phone case, Notebook, etc..." required>

    <label>11. Any specific sticker ideas or themes you'd love?</label>
    <textarea name="ideas" required></textarea>

    <label>12. Would you like themed drops or weekly specials?</label>
    <select name="drops" required>
      <option value="" disabled selected>Need Premium?</option>
      <option>Yes</option>
      <option>Maybe</option>
      <option>No</option>
    </select>

    <label>13. Username</label>
    <textarea type="text" name="name" required></textarea>

    <label>Phone Number</label>
    <textarea type="number" name="phonenumber" min="10" required></textarea>

    <button type="submit">Send via WhatsApp ðŸ’Œ</button>
  </form>

  <p>Please do not worry about your information your data is just till us and no one elese. We respect other personal information and don't harm it. Thank You</p>

  <script>
  document.getElementById('stickerForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    
    let textContent = 'âœ¨ Kuro To Shiro - Sticker Survey âœ¨\n\n';
    let username = 'User'; // default fallback

    for (let [key, value] of data.entries()) {
      if (key.toLowerCase() === 'name') {
        username = value.trim().replaceAll(/[^a-zA-Z0-9]/g, '_'); // clean filename
      }
      textContent += `${key}: ${value}\n`;
    }

    // Step 1: Create downloadable .txt file with username-based name
    const blob = new Blob([textContent], { type: 'text/plain' });
    const downloadLink = document.createElement('a');
    downloadLink.href = URL.createObjectURL(blob);
    downloadLink.download = `${username}_Sticker_Survey.txt`;
    downloadLink.style.display = 'none';
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);

    // Step 2: Redirect to WhatsApp chat with custom message
    const phoneNumber = '919954013194';
    const shortMsg = encodeURIComponent("Hey! I've filled out the sticker survey and attached the text file! ðŸ’Œâœ¨");
    const waUrl = `https://wa.me/${phoneNumber}?text=${shortMsg}`;
    window.open(waUrl, '_blank');
  });
</script>
</body>
</html>
